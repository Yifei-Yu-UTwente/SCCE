---
layout:
title:
date: 2025-06-01 00:00:00 -1000
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IS2H4C</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #2E7D32;
            --secondary: #4CAF50;
            --dark: #1B5E20;
            --light: #C8E6C9;
            --supply: #1976D2;
            --demand: #FF6D00;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* Login Page Styles */
        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: var(--light);
            padding: 2rem;
        }
        
        .login-box {
            background-color: white;
            border-radius: 10px;
            padding: 2.5rem;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .login-logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .login-title {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: #444;
        }
        
        .login-form .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .login-form label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 500;
        }
        
        .login-form input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .login-btn {
            width: 100%;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 1rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1rem;
            transition: background-color 0.3s;
        }
        
        .login-btn:hover {
            background-color: var(--dark);
        }
        
        .login-links {
            margin-top: 1.5rem;
            font-size: 0.9rem;
        }
        
        .login-links a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .guest-btn {
            width: 100%;
            background-color: #757575;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 1rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1rem;
            transition: background-color 0.3s;
        }
        
        .guest-btn:hover {
            background-color: #424242;
        }
        
        /* Profile Setup Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .modal-subtitle {
            font-size: 1rem;
            color: #666;
            margin-bottom: 1.5rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .profile-form .form-group {
            margin-bottom: 1.5rem;
        }
        
        .profile-form label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 500;
        }
        
        .profile-form .required:after {
            content: " *";
            color: #e32;
        }
        
        .profile-form input, 
        .profile-form select,
        .profile-form textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .profile-form textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .submit-profile-btn {
            width: 100%;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 1rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1rem;
            transition: background-color 0.3s;
        }
        
        .submit-profile-btn:hover {
            background-color: var(--dark);
        }
        
        /* Main App Styles */
        .app-container {
            display: none;
            min-height: 100vh;
            flex-direction: column;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            display: none;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        
        nav ul li a:hover {
            background-color: rgba(255,255,255,0.2);
        }
        
        .main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            display: none;
        }
        
        /* Page-specific styles */
        /* Dashboard Page */
        .dashboard-content {
            display: block;
        }
        
        /* Registration Page */
        .registration-content {
            display: none;
        }
        
        /* Marketplace Page */
        .marketplace-content {
            display: none;
        }
        
        /* Profile Page */
        .profile-content {
            display: none;
        }
        
        /* Users Management Page */
        .users-content {
            display: none;
        }
        
        /* GIS Map Styles */
        .map-container {
            position: relative;
            width: 100%;
            height: 500px;
            background-color: #e9f5e9;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 1.5rem;
            background-image: url('https://maps.googleapis.com/maps/api/staticmap?center=52.1326,5.2913&zoom=7&size=1200x500&maptype=roadmap&style=feature:all|element:labels|visibility:off&key=AIzaSyDummyKey1234567890');
            background-size: cover;
            background-position: center;
        }
        
        .map-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: var(--supply);
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .map-marker.demand {
            background-color: var(--demand);
        }
        
        .map-marker::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: inherit;
            border-radius: 50%;
            opacity: 0.3;
            top: -7px;
            left: -7px;
            z-index: -1;
        }
        
        .company-popup {
            position: absolute;
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 100;
            display: none;
        }
        
        .company-popup h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .company-popup .industry {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .company-popup .details {
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .company-popup .close-popup {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #777;
        }
        
        /* Dashboard Styles */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .dashboard-title {
            font-size: 1.8rem;
            color: var(--dark);
        }
        
        .welcome-message {
            color: #555;
            margin-bottom: 2rem;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stat-card h3 {
            color: #555;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .stat-card .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        /* Registration Page Styles */
        .registration-form {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Marketplace Page Styles */
        .marketplace-posts {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .post-card {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Profile Page Styles */
        .profile-view {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Users Management Styles */
        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .users-table th, 
        .users-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .users-table th {
            background-color: var(--light);
            color: var(--dark);
        }
        
        .users-table tr:last-child td {
            border-bottom: none;
        }
        
        .user-role {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            background-color: #e0e0e0;
            color: #424242;
        }
        
        .role-admin {
            background-color: #d32f2f;
            color: white;
        }
        
        .role-manager {
            background-color: #1976d2;
            color: white;
        }
        
        .role-member {
            background-color: #388e3c;
            color: white;
        }
        
        .role-guest {
            background-color: #757575;
            color: white;
        }
        
        .user-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .user-action-btn {
            padding: 0.5rem;
            border: none;
            border-radius: 4px;
            background-color: var(--light);
            color: var(--dark);
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .user-action-btn:hover {
            background-color: var(--secondary);
            color: white;
        }
        
        .add-user-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .add-user-btn:hover {
            background-color: var(--dark);
        }
        
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            nav ul li {
                margin-left: 0;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .users-table {
                display: block;
                overflow-x: auto;
            }
        }
        
       .profile-form h4 {
    margin: 1.5rem 0 1rem;
    color: var(--primary);
    border-bottom: 1px solid #eee;
    padding-bottom: 0.5rem;
    }

#companySearchResults {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid #ddd;
    border-radius: 5px;
}

#companySearchResults div {
    padding: 0.5rem;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}

#companySearchResults div:hover {
    background-color: var(--light);
}

.company-toggle-container {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 1rem;
}

.company-toggle-container input[type="checkbox"] {
    margin: 0;
    width: auto;
}

/* Company Select Dropdown Styles */
.company-select-container {
    position: relative;
    margin-top: 0.5rem;
}

.company-select-toggle {
    width: 100%;
    padding: 0.8rem 1rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    text-align: left;
    background-color: white;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.company-select-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    max-height: 200px;
    overflow-y: auto;
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 0 0 5px 5px;
    z-index: 10;
    display: none;
}

.company-select-dropdown.show {
    display: block;
}

.company-option {
    padding: 0.8rem 1rem;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}

.company-option:hover {
    background-color: var(--light);
}

.company-option:last-child {
    border-bottom: none;
}
    </style>


</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <div class="login-logo">IS2H4C</div>
            <h2 class="login-title">Login Page</h2>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="login-btn">Login</button>
                <button type="button" class="guest-btn" id="guestLogin">Continue as Guest</button>
                <div class="login-links">
                    <a href="#" id="showRegistration">Create account</a> | <a href="#">Forgot password?</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Profile Setup Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h3 class="modal-title">Step 1: Complete Your Profile</h3>
                    <p class="modal-subtitle">Set up your company and user profile to access the platform</p>
                </div>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <form class="profile-form" id="profileForm">
                <div class="form-group">
                    <label for="companyName" class="required">Company/Organisation Name</label>
                    <input type="text" id="companyName" required value="EcoSolutions Netherlands">
                </div>
                
                <div class="form-group">
                    <label for="industry" class="required">Industry/Sector</label>
                    <select id="industry" required>
                        <option value="">Select your industry/sector</option>
                        <option value="chemical" selected>Chemical Industry</option>
                        <option value="construction">Construction</option>
                        <option value="energy">Energy Production</option>
                        <option value="food">Food Processing</option>
                        <option value="manufacturing">Manufacturing</option>
                        <option value="metals">Metals & Mining</option>
                        <option value="textile">Textile</option>
                        <option value="waste">Waste Management</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="productService" class="required">Product/Service</label>
                    <input type="text" id="productService" required placeholder="Main products or services your company provides" value="Chemical byproduct recycling and repurposing">
                </div>
                
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" placeholder="Street address" value="Eco Park 42, Rotterdam">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="country">Country</label>
                        <select id="country">
                            <option value="">Select country</option>
                            <option value="netherlands" selected>Netherlands</option>
                            <option value="germany">Germany</option>
                            <option value="spain">Spain</option>
                            <option value="turkey">Turkey</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="hubStatus">Are you in a hub?</label>
                    <select id="hubStatus">
                        <option value="">Select option</option>
                        <option value="dutch" selected>Dutch Hub</option>
                        <option value="german">German Hub</option>
                        <option value="basque">Basque Hub</option>
                        <option value="turkish">Turkish Hub</option>
                        <option value="none">Outside Hub</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="role" class="required">Your Role in the Company</label>
                    <select id="role" required>
                        <option value="">Select your role</option>
                        <option value="admin">Company Administrator</option>
                        <option value="manager">Hub Manager</option>
                        <option value="member" selected>Company Member</option>
                        <option value="guest">Guest</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="fullName" class="required">Your Full Name</label>
                    <input type="text" id="fullName" required placeholder="Your name" value="John Doe">
                </div>
                
                <div class="form-group">
                    <label for="position">Your Position</label>
                    <input type="text" id="position" placeholder="Your position in the company" value="Sustainability Manager">
                </div>
                
                <button type="submit" class="submit-profile-btn">Continue</button>
            </form>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal-overlay" id="addUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h3 class="modal-title">Add New User to Company</h3>
                    <p class="modal-subtitle">Invite a new team member to your company account</p>
                </div>
                <button class="close-modal" id="closeAddUserModal">&times;</button>
            </div>
            <form class="profile-form" id="addUserForm">
                <div class="form-group">
                    <label for="newUserEmail" class="required">Email</label>
                    <input type="email" id="newUserEmail" required placeholder="user@company.com">
                </div>
                
                <div class="form-group">
                    <label for="newUserRole" class="required">Role</label>
                    <select id="newUserRole" required>
                        <option value="">Select role</option>
                        <option value="admin">Company Administrator</option>
                        <option value="manager">Hub Manager</option>
                        <option value="member">Company Member</option>
                        <option value="guest">Guest</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="newUserName" class="required">Full Name</label>
                    <input type="text" id="newUserName" required placeholder="Full name">
                </div>
                
                <div class="form-group">
                    <label for="newUserPosition">Position</label>
                    <input type="text" id="newUserPosition" placeholder="Position in company">
                </div>
                
                <button type="submit" class="submit-profile-btn">Add User</button>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer">
        <header id="mainHeader">
            <div class="logo" id="homeLogo" style="cursor: pointer;">IS2H4C</div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="https://yifei-yu-utwente.github.io/SCCE/2025/05/01/OnlineMarketplacePrototype.html" class="nav-link" data-page="marketplace" id="marketplaceLink"><i class="fas fa-store"></i> Marketplace</a></li>
                    <li><a href="#" class="nav-link" data-page="profile"><i class="fas fa-user"></i> My Profile</a></li>
                    <li><a href="#" class="nav-link" data-page="users" id="usersLink"><i class="fas fa-users"></i> Manage Users</a></li>
                </ul>
            </nav>
        </header>

        <!-- Dashboard Page -->
        <div class="main-content dashboard-content" id="dashboardPage">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Landing Page</h1>
            </div>
            
            <p class="welcome-message" id="welcomeMessage">Welcome back! Explore potential industrial symbiosis opportunities in your region.</p>
            
            <div class="stats-container">
                <div class="stat-card">
                    <h3>Potential Matches</h3>
                    <div class="value">24</div>
                </div>
                <div class="stat-card">
                    <h3>Companies Nearby</h3>
                    <div class="value">37</div>
                </div>
                <div class="stat-card">
                    <h3>Active Contacts</h3>
                    <div class="value">8</div>
                </div>
            </div>
            
            <h2>Map</h2>
            <div class="map-container" id="mapContainer">
                <!-- Map markers will be added dynamically -->
                <div class="company-popup" id="companyPopup">
                    <button class="close-popup">&times;</button>
                    <h3 id="popupCompanyName">Company Name</h3>
                    <div class="industry" id="popupIndustry">Chemical Industry</div>
                    <div class="details" id="popupDetails">
                        <p><strong>Products/Services:</strong> <span id="popupProducts">Industrial solvents, chemical byproducts</span></p>
                        <p><strong>Location:</strong> <span id="popupLocation">Rotterdam, Netherlands</span></p>
                        <p><strong>Hub:</strong> <span id="popupHub">Dutch Hub</span></p>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Registration Page -->
        <div class="main-content registration-content" id="registrationPage">
            <h1 class="dashboard-title">New User Registration</h1>
            <div class="registration-form">
                <form id="registrationForm">
                    <div class="form-group">
                        <label for="regEmail" class="required">Email</label>
                        <input type="email" id="regEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="regPassword" class="required">Password</label>
                        <input type="password" id="regPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="regConfirmPassword" class="required">Confirm Password</label>
                        <input type="password" id="regConfirmPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="regRole" class="required">Account Type</label>
                        <select id="regRole" required>
                            <option value="">Select account type</option>
                            <option value="new-company">Create new company account</option>
                            <option value="existing-company">Join existing company</option>
                        </select>
                    </div>
                    <div id="companySearchContainer" style="display: none;">
                        <div class="form-group">
                            <label for="companySearch">Search for your company</label>
                            <input type="text" id="companySearch" placeholder="Start typing company name...">
                            <div id="companySearchResults" style="margin-top: 0.5rem;"></div>
                        </div>
                    </div>
                    <button type="submit" class="submit-profile-btn">Register</button>
                </form>
            </div>
        </div>
        
        <!-- Profile Page -->
        <div class="main-content profile-content" id="profilePage">
            <h1 class="dashboard-title">Your Profile</h1>
            <div class="profile-view">
                <div class="form-group">
                    <label>Your Name</label>
                    <p id="profileUserName">John Doe</p>
                </div>
                <div class="form-group">
                    <label>Your Position</label>
                    <p id="profileUserPosition">Sustainability Manager</p>
                </div>
                <div class="form-group">
                    <label>Your Role</label>
                    <p id="profileUserRole">Company Member</p>
                </div>
                <div class="form-group">
                    <label>Company/Organisation Name</label>
                    <p id="profileCompanyName">EcoSolutions Netherlands</p>
                </div>
                <div class="form-group">
                    <label>Industry/Sector</label>
                    <p id="profileIndustry">Chemical Industry</p>
                </div>
                <div class="form-group">
                    <label>Product/Service</label>
                    <p id="profileProduct">Chemical byproduct recycling and repurposing</p>
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <p id="profileLocation">Eco Park 42, Rotterdam, Netherlands (Dutch Hub)</p>
                </div>
                <button class="submit-profile-btn" id="editProfileBtn">Edit Profile</button>
            </div>
        </div>
        
        <!-- Users Management Page -->
        <div class="main-content users-content" id="usersPage">
            <h1 class="dashboard-title">Manage Company Users</h1>
            <p>View and manage all users associated with your company account.</p>
            
            <table class="users-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Position</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <!-- Users will be added dynamically -->
                </tbody>
            </table>
            
            <button class="add-user-btn" id="addUserBtn">
                <i class="fas fa-plus"></i> Add New User
            </button>
        </div>
    </div>
    
        <!-- Registration Modal -->
<div class="modal-overlay" id="registrationModal">
    <div class="modal-content">
        <div class="modal-header">
            <div>
                <h3 class="modal-title">Step 1. Create New Profile</h3>
                <p class="modal-subtitle">Complete the form to register</p>
            </div>
            <button class="close-modal" id="closeRegistrationModal">&times;</button>
        </div>
        <form class="profile-form" id="registrationForm">
            <h4>User Information</h4>
            <div class="form-group">
                <label for="regName" class="required">Full Name</label>
                <input type="text" id="regName" required>
            </div>
            <div class="form-group">
                <label for="regEmail" class="required">Email</label>
                <input type="email" id="regEmail" required>
            </div>
            <div class="form-group">
                <label for="regPassword" class="required">Password</label>
                <input type="password" id="regPassword" required>
            </div>
            <div class="form-group">
                <label for="regConfirmPassword" class="required">Confirm Password</label>
                <input type="password" id="regConfirmPassword" required>
            </div>
            
              <h4>Company Information</h4>
            <div class="company-toggle-container">
                <label for="existingCompanyToggle">Belong to an existing company?</label>
                <input type="checkbox" id="existingCompanyToggle">
            </div>
            
            <div id="existingCompanySection" style="display: none;">
                <div class="form-group">
                    <label>Select your company</label>
                    <div class="company-select-container">
                        <button type="button" class="company-select-toggle" id="companySelectToggle">
                            Select Company ▼
                        </button>
                        <div class="company-select-dropdown" id="companySelectDropdown">
                            <!-- Companies will be added dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="existingCompanySection" style="display: none;">
                <div class="form-group">
                    <label for="companySearch">Search for your company</label>
                    <input type="text" id="companySearch" placeholder="Start typing company name...">
                    <div id="companySearchResults" style="margin-top: 0.5rem;"></div>
                </div>
            </div>
            
            <div id="newCompanySection">
                <div class="form-group">
                    <label for="regCompanyName" class="required">Company Name</label>
                    <input type="text" id="regCompanyName" required>
                </div>
                <div class="form-group">
                    <label for="regIndustry" class="required">Industry</label>
                    <select id="regIndustry" required>
                        <option value="">Select industry</option>
                        <option value="chemical">Chemical Industry</option>
                        <option value="construction">Construction</option>
                        <option value="energy">Energy Production</option>
                        <option value="food">Food Processing</option>
                        <option value="manufacturing">Manufacturing</option>
                        <option value="metals">Metals & Mining</option>
                        <option value="textile">Textile</option>
                        <option value="waste">Waste Management</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="regAddress">Address</label>
                    <input type="text" id="regAddress">
                </div>
                <div class="form-group">
                    <label for="regHub">Are you in a hub?</label>
                    <select id="regHub">
                        <option value="">Select option</option>
                        <option value="dutch">Dutch Hub</option>
                        <option value="german">German Hub</option>
                        <option value="basque">Basque Hub</option>
                        <option value="turkish">Turkish Hub</option>
                        <option value="none">Outside Hub</option>
                    </select>
                </div>
            </div>
            
            <button type="submit" class="submit-profile-btn">Register</button>
        </form>
    </div>
</div>

   <script>
    // DOM Elements
    const loginContainer = document.querySelector('.login-container');
    const loginForm = document.getElementById('loginForm');
    const profileModal = document.getElementById('profileModal');
    const closeModalBtn = document.getElementById('closeModal');
    const profileForm = document.getElementById('profileForm');
    const appContainer = document.getElementById('appContainer');
    const mainHeader = document.getElementById('mainHeader');
    const mapContainer = document.getElementById('mapContainer');
    const companyPopup = document.getElementById('companyPopup');
    const closePopupBtn = companyPopup.querySelector('.close-popup');
    const showRegistrationLink = document.getElementById('showRegistration');
    const guestLoginBtn = document.getElementById('guestLogin');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const addUserModal = document.getElementById('addUserModal');
    const closeAddUserModalBtn = document.getElementById('closeAddUserModal');
    const addUserForm = document.getElementById('addUserForm');
    const addUserBtn = document.getElementById('addUserBtn');
    const usersLink = document.getElementById('usersLink');
    const editProfileBtn = document.getElementById('editProfileBtn');
    const companySelectToggle = document.getElementById('companySelectToggle');
    const companySelectDropdown = document.getElementById('companySelectDropdown');
    
    // Registration Modal Elements
    const registrationModal = document.getElementById('registrationModal');
    const closeRegistrationModalBtn = document.getElementById('closeRegistrationModal');
    const registrationForm = document.getElementById('registrationForm');
    const existingCompanyToggle = document.getElementById('existingCompanyToggle');
    const existingCompanySection = document.getElementById('existingCompanySection');
    const newCompanySection = document.getElementById('newCompanySection');
    const companySearchInput = document.getElementById('companySearch');
    const companySearchResults = document.getElementById('companySearchResults');

    // Page elements
    const dashboardPage = document.getElementById('dashboardPage');
    const profilePage = document.getElementById('profilePage');
    const usersPage = document.getElementById('usersPage');
    const navLinks = document.querySelectorAll('.nav-link');

    // Sample companies data
    const companies = [
        {
            id: 1,
            name: "IS2H4C",
            industry: "Chemical Industry",
            products: "Industrial solvents, chemical byproducts",
            location: "Rotterdam, Netherlands",
            hub: "Dutch Hub",
            coords: { x: 30, y: 40 },
            type: "supply",
            users: [
                {
                    id: 101,
                    email: "admin@IS2H4C.com",
                    name: "Yifei Yu",
                    position: "CEO",
                    role: "admin",
                    password: "admin123"
                },
                {
                    id: 102,
                    email: "manager@IS2H4C.com",
                    name: "Michael Chen",
                    position: "Operations Manager",
                    role: "manager",
                    password: "manager123"
                }
            ]
        },
        {
            id: 2,
            name: "EcoSteel Manufacturing",
            industry: "Metals & Mining",
            products: "Steel beams, metal scraps",
            location: "Duisburg, Germany",
            hub: "German Hub",
            coords: { x: 60, y: 30 },
            type: "supply",
            users: [
                {
                    id: 201,
                    email: "admin@ecosteel.com",
                    name: "Thomas Müller",
                    position: "Plant Director",
                    role: "admin",
                    password: "admin123"
                }
            ]
        },
        {
            id: 3,
            name: "BioEnergy Partners",
            industry: "Energy Production",
            products: "Waste-to-energy solutions",
            location: "Bilbao, Spain",
            hub: "Basque Hub",
            coords: { x: 20, y: 70 },
            type: "demand",
            users: [
                {
                    id: 301,
                    email: "admin@bioenergy.com",
                    name: "Carlos Ruiz",
                    position: "Technical Director",
                    role: "admin",
                    password: "admin123"
                }
            ]
        },
        {
            id: 4,
            name: "Textile Innovations",
            industry: "Textile",
            products: "Fabric scraps, textile waste",
            location: "Istanbul, Turkey",
            hub: "Turkish Hub",
            coords: { x: 80, y: 80 },
            type: "supply",
            users: [
                {
                    id: 401,
                    email: "admin@textileinnov.com",
                    name: "Aylin Demir",
                    position: "Sustainability Manager",
                    role: "admin",
                    password: "admin123"
                }
            ]
        },
        {
            id: 5,
            name: "WasteTransform",
            industry: "Waste Management",
            products: "Waste processing services",
            location: "Amsterdam, Netherlands",
            hub: "Dutch Hub",
            coords: { x: 25, y: 35 },
            type: "demand",
            users: [
                {
                    id: 501,
                    email: "admin@wastetransform.com",
                    name: "Lisa van den Berg",
                    position: "Operations Director",
                    role: "admin",
                    password: "admin123"
                }
            ]
        }
    ];

    // Current user data
    let currentUser = null;
    let currentCompany = null;

    /* ====================== */
    /* === EVENT LISTENERS === */
    /* ====================== */

    // Home logo click handler
    document.getElementById('homeLogo').addEventListener('click', function() {
        appContainer.style.display = 'none';
        loginContainer.style.display = 'flex';
        currentUser = null;
        currentCompany = null;
    });

    // Registration link handler
    showRegistrationLink.addEventListener('click', function(e) {
        e.preventDefault();
        registrationModal.classList.add('active');
    });

    // Close registration modal
    closeRegistrationModalBtn.addEventListener('click', function() {
        registrationModal.classList.remove('active');
    });

        // Toggle between existing/new company
    existingCompanyToggle.addEventListener('change', function() {
    if (this.checked) {
        existingCompanySection.style.display = 'block';
        newCompanySection.style.display = 'none';
        
        // Populate company dropdown
        companySelectDropdown.innerHTML = '';
        companies.forEach(company => {
            const option = document.createElement('div');
            option.className = 'company-option';
            option.textContent = company.name;
            option.dataset.companyId = company.id;
            option.addEventListener('click', function() {
                companySelectToggle.textContent = company.name + ' ▲';
                companySearchInput.dataset.selectedCompanyId = company.id;
                companySelectDropdown.classList.remove('show');
            });
            companySelectDropdown.appendChild(option);
        });
        } else {
        existingCompanySection.style.display = 'none';
        newCompanySection.style.display = 'block';
        companySelectToggle.textContent = 'Select Company ▼';
        }
    });

        // Toggle company dropdown
        companySelectToggle.addEventListener('click', function() {
            companySelectDropdown.classList.toggle('show');
            this.textContent = this.textContent.includes('▼') 
                ? this.textContent.replace('▼', '▲')
                : this.textContent.replace('▲', '▼');
        });

    // Company search functionality
    companySearchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        if (searchTerm.length < 2) {
            companySearchResults.innerHTML = '';
            return;
        }
        
        const results = companies.filter(company => 
            company.name.toLowerCase().includes(searchTerm)
        );
        
        companySearchResults.innerHTML = '';
        
        if (results.length === 0) {
            companySearchResults.innerHTML = '<div style="padding: 0.5rem;">No companies found</div>';
            return;
        }
        
        results.forEach(company => {
            const div = document.createElement('div');
            div.textContent = company.name;
            div.dataset.companyId = company.id;
            
            div.addEventListener('click', function() {
                companySearchInput.value = company.name;
                companySearchInput.dataset.selectedCompanyId = company.id;
                companySearchResults.innerHTML = '';
            });
            
            companySearchResults.appendChild(div);
        });
    });

    // Registration form submission
    registrationForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Validate passwords match
        const password = document.getElementById('regPassword').value;
        const confirmPassword = document.getElementById('regConfirmPassword').value;
        
        if (password !== confirmPassword) {
            alert('Passwords do not match');
            return;
        }
        
        // Create user object
        const newUser = {
            id: Math.floor(Math.random() * 1000) + 1000,
            name: document.getElementById('regName').value,
            email: document.getElementById('regEmail').value,
            password: password,
            role: 'member'
        };
        
        // Handle company association
        if (existingCompanyToggle.checked) {
            const companyId = companySearchInput.dataset.selectedCompanyId;
            if (!companyId) {
                alert('Please select a company');
                return;
            }
            
            const company = companies.find(c => c.id == companyId);
            if (company) {
                company.users.push(newUser);
                currentCompany = company;
                currentUser = newUser;
                registrationModal.classList.remove('active');
                showMainContent();
            } else {
                alert('Selected company not found');
            }
        } else {
            // Create new company
            const newCompany = {
                id: Math.floor(Math.random() * 1000) + 1000,
                name: document.getElementById('regCompanyName').value,
                industry: document.getElementById('regIndustry').value,
                address: document.getElementById('regAddress').value,
                hubStatus: document.getElementById('regHub').value,
                users: [newUser]
            };
            
            companies.push(newCompany);
            currentCompany = newCompany;
            currentUser = newUser;
            registrationModal.classList.remove('active');
            showMainContent();
        }
    });

    // Login Form Submission
    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        if (email && password) {
            let foundUser = null;
            let foundCompany = null;
            
            for (const company of companies) {
                const user = company.users.find(u => u.email === email && u.password === password);
                if (user) {
                    foundUser = user;
                    foundCompany = company;
                    break;
                }
            }
            
            if (foundUser && foundCompany) {
                currentUser = foundUser;
                currentCompany = foundCompany;
                showMainContent();
            } else {
                alert('Invalid email or password');
            }
        }
    });

    // Profile Form Submission
    profileForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get required form values
        const companyName = document.getElementById('companyName').value;
        const industry = document.getElementById('industry').value;
        const productService = document.getElementById('productService').value;
        const role = document.getElementById('role').value;
        const fullName = document.getElementById('fullName').value;
        
        if (!companyName || !industry || !productService || !role || !fullName) {
            alert('Please fill in all required fields (marked with *)');
            return;
        }
        
        // Update or create company
        if (!currentCompany || currentUser.isNewUser) {
            currentCompany = {
                id: Math.floor(Math.random() * 1000) + 1000,
                name: companyName,
                industry: industry,
                products: productService,
                address: document.getElementById('address').value,
                country: document.getElementById('country').value,
                hubStatus: document.getElementById('hubStatus').value,
                users: []
            };
            companies.push(currentCompany);
        }
        
        // Update user
        currentUser = {
            ...currentUser,
            name: fullName,
            position: document.getElementById('position').value,
            role: role,
            isNewUser: false,
            isGuest: false
        };
        
        if (!currentCompany.users.some(u => u.id === currentUser.id)) {
            currentCompany.users.push(currentUser);
        }
        
        profileModal.classList.remove('active');
        showMainContent();
    });

    // Add User Form Submission
    addUserForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('newUserEmail').value;
        const role = document.getElementById('newUserRole').value;
        const name = document.getElementById('newUserName').value;
        const position = document.getElementById('newUserPosition').value;
        
        if (!email || !role || !name) {
            alert('Please fill in all required fields');
            return;
        }
        
        if (currentCompany.users.some(u => u.email === email)) {
            alert('A user with this email already exists in your company');
            return;
        }
        
        const newUser = {
            id: Math.floor(Math.random() * 1000) + 1000,
            email: email,
            name: name,
            position: position,
            role: role,
            password: 'temp' + Math.random().toString(36).slice(2)
        };
        
        currentCompany.users.push(newUser);
        loadUsersTable();
        addUserModal.classList.remove('active');
        addUserForm.reset();
    });

    // Navigation link clicks
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            if (this.id !== 'marketplaceLink') {
                e.preventDefault();
                showPage(this.dataset.page);
            }
        });
    });
    
    document.getElementById('marketplaceLink').addEventListener('click', function(e) {
    if (currentUser?.isGuest) {
        e.preventDefault();
        alert("Please contact the hub leader for accessing the marketplace");
        return;
    }
});

    // Other event listeners
    closeModalBtn.addEventListener('click', () => profileModal.classList.remove('active'));
    closeAddUserModalBtn.addEventListener('click', () => addUserModal.classList.remove('active'));
    addUserBtn.addEventListener('click', () => addUserModal.classList.add('active'));
    editProfileBtn.addEventListener('click', showEditProfileModal);
    closePopupBtn.addEventListener('click', () => companyPopup.style.display = 'none');
   
   guestLoginBtn.addEventListener('click', function() {
    currentUser = {
        id: 999,
        email: "guest@is2h4c.com",
        name: "Guest User",
        role: "guest",
        isGuest: true  // Make sure this flag is set
    };
    
    currentCompany = {
        id: 999,
        name: "Guest Access",
        industry: "Limited Access",
        products: "Guest features only",
        location: "Not specified",
        hub: "None",
        users: [currentUser]
    };
    
    showMainContent(true);
});

    /* ==================== */
    /* === MAIN FUNCTIONS === */
    /* ==================== */

    function showMainContent(isGuest = false) {
        loginContainer.style.display = 'none';
        appContainer.style.display = 'flex';
        mainHeader.style.display = 'flex';
        showPage('dashboard');
        initMap();
        updateProfileView();
        
        if (isGuest) {
            welcomeMessage.textContent = "Welcome guest! Explore potential industrial symbiosis opportunities in your region with limited access.";
            usersLink.style.display = 'none';
        } else {
            welcomeMessage.textContent = `Welcome back, ${currentUser.name || 'User'}!`;
            usersLink.style.display = (currentUser.role === 'admin' || currentUser.role === 'manager') ? 'flex' : 'none';
        }
        
    }

    function updateProfileView() {
        if (!currentUser || !currentCompany) return;
        
        document.getElementById('profileUserName').textContent = currentUser.name || 'Not specified';
        document.getElementById('profileUserPosition').textContent = currentUser.position || 'Not specified';
        
        const roleDisplay = {
            'admin': 'Company Administrator',
            'manager': 'Hub Manager',
            'member': 'Company Member',
            'guest': 'Guest'
        };
        document.getElementById('profileUserRole').textContent = roleDisplay[currentUser.role] || currentUser.role;
        
        document.getElementById('profileCompanyName').textContent = currentCompany.name || 'Not specified';
        document.getElementById('profileIndustry').textContent = currentCompany.industry || 'Not specified';
        document.getElementById('profileProduct').textContent = currentCompany.products || 'Not specified';
        
        let locationParts = [];
        if (currentCompany.address) locationParts.push(currentCompany.address);
        if (currentCompany.country) {
            const countryText = document.getElementById('country').options[document.getElementById('country').selectedIndex].text;
            locationParts.push(countryText);
        }
        if (currentCompany.hubStatus) {
            const hubText = document.getElementById('hubStatus').options[document.getElementById('hubStatus').selectedIndex].text;
            locationParts.push(`(${hubText})`);
        }
        document.getElementById('profileLocation').textContent = locationParts.join(', ') || 'Not specified';
    }

    function showPage(pageId) {
        document.querySelectorAll('.main-content').forEach(page => {
            page.style.display = 'none';
        });
        document.getElementById(`${pageId}Page`).style.display = 'block';
        
        navLinks.forEach(link => {
            link.style.fontWeight = link.dataset.page === pageId ? 'bold' : 'normal';
        });
        
        if (pageId === 'users' && currentCompany) {
            loadUsersTable();
        }
    }

    function loadUsersTable() {
        const tableBody = document.getElementById('usersTableBody');
        tableBody.innerHTML = '';
        
        if (!currentCompany?.users) return;
        
        currentCompany.users.forEach(user => {
            const roleClass = {
                'admin': 'role-admin',
                'manager': 'role-manager',
                'member': 'role-member',
                'guest': 'role-guest'
            }[user.role] || '';
            
            const roleDisplay = {
                'admin': 'Admin',
                'manager': 'Manager',
                'member': 'Member',
                'guest': 'Guest'
            }[user.role] || user.role;
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${user.name}</td>
                <td>${user.email}</td>
                <td>${user.position || '-'}</td>
                <td><span class="user-role ${roleClass}">${roleDisplay}</span></td>
                <td>
                    <div class="user-actions">
                        <button class="user-action-btn edit-user" data-user-id="${user.id}"><i class="fas fa-edit"></i></button>
                        ${user.id !== currentUser.id ? `<button class="user-action-btn delete-user" data-user-id="${user.id}"><i class="fas fa-trash"></i></button>` : ''}
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });
        
        document.querySelectorAll('.edit-user').forEach(btn => {
            btn.addEventListener('click', function() {
                const userId = parseInt(this.dataset.userId);
                const user = currentCompany.users.find(u => u.id === userId);
                if (user) alert(`Editing user: ${user.name}\nEmail: ${user.email}\nRole: ${user.role}`);
            });
        });
        
        document.querySelectorAll('.delete-user').forEach(btn => {
            btn.addEventListener('click', function() {
                const userId = parseInt(this.dataset.userId);
                if (confirm('Are you sure you want to delete this user?')) {
                    currentCompany.users = currentCompany.users.filter(u => u.id !== userId);
                    loadUsersTable();
                }
            });
        });
    }

    function initMap() {
        document.querySelectorAll('.map-marker').forEach(marker => marker.remove());
        
        companies.forEach(company => {
            const marker = document.createElement('div');
            marker.className = `map-marker ${company.type}`;
            marker.style.left = `${company.coords.x}%`;
            marker.style.top = `${company.coords.y}%`;
            marker.dataset.companyId = company.id;
            
            marker.addEventListener('click', () => showCompanyPopup(company));
            mapContainer.appendChild(marker);
        });
    }

    function showCompanyPopup(company) {
        document.getElementById('popupCompanyName').textContent = company.name;
        document.getElementById('popupIndustry').textContent = company.industry;
        document.getElementById('popupProducts').textContent = company.products;
        document.getElementById('popupLocation').textContent = company.location;
        document.getElementById('popupHub').textContent = company.hub;
        
        companyPopup.style.left = `${company.coords.x + 5}%`;
        companyPopup.style.top = `${company.coords.y}%`;
        companyPopup.style.display = 'block';
    }

    function showEditProfileModal() {
        if (!currentUser || !currentCompany) return;
        
        document.getElementById('companyName').value = currentCompany.name || '';
        document.getElementById('industry').value = currentCompany.industry || '';
        document.getElementById('productService').value = currentCompany.products || '';
        document.getElementById('address').value = currentCompany.address || '';
        document.getElementById('country').value = currentCompany.country || '';
        document.getElementById('hubStatus').value = currentCompany.hubStatus || '';
        document.getElementById('role').value = currentUser.role || '';
        document.getElementById('fullName').value = currentUser.name || '';
        document.getElementById('position').value = currentUser.position || '';
        
        profileModal.classList.add('active');
    }

    function handleGuestLogin() {
        currentUser = {
            id: 999,
            email: "guest@is2h4c.com",
            name: "Guest User",
            role: "guest",
            isGuest: true
        };
        
        currentCompany = {
            id: 999,
            name: "Guest Access",
            industry: "Limited Access",
            products: "Guest features only",
            location: "Not specified",
            hub: "None",
            users: [currentUser]
        };
        
        showMainContent(true);
    }

    // Close modals when clicking outside
    profileModal.addEventListener('click', (e) => {
        if (e.target === profileModal) profileModal.classList.remove('active');
    });
    addUserModal.addEventListener('click', (e) => {
        if (e.target === addUserModal) addUserModal.classList.remove('active');
    });
    registrationModal.addEventListener('click', (e) => {
        if (e.target === registrationModal) registrationModal.classList.remove('active');
    });

    // Close popup when clicking outside
    mapContainer.addEventListener('click', (e) => {
        if (e.target === mapContainer) companyPopup.style.display = 'none';
    });

    // Demo login credentials
    document.getElementById('email').value = 'admin@IS2H4C.com';
    document.getElementById('password').value = 'admin123';
</script>
</body>
</html>
